{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendor Dashboard — TWD</title>
    <link rel="stylesheet" href="{% static 'css/vendorhome.css' %}">
</head>
<body>

<div class="wrapper">

    <!-- ===== Desktop Topbar ===== -->
    <header class="topbar">
        <div class="brand">
            <div class="logo">TWD</div>
            <div>
                <h1>Vendor Dashboard</h1>
                <span>Manage your packages</span>
            </div>
        </div>

        <nav class="nav-actions">
            <a href="{% url 'vcreate' %}" class="btn primary">+ Create</a>
            <a href="{% url 'vendorbookings' %}" class="btn light">Bookings</a>
            <a href="{% url 'vendorlogout' %}" class="btn danger">Logout</a>
        </nav>
    </header>

    <!-- ===== Vendor Profile ===== -->
    <section class="vendor-card">
        <div class="avatar">
            {{ vendor.businessname|slice:":1"|upper|default:"V" }}
        </div>
        <div class="vendor-info">
            <h3>{{ vendor.businessname|default:"Vendor" }}</h3>
            <p>{{ vendor.email|default:"—" }}</p>
            <p>{{ vendor.phone|default:"—" }}</p>
        </div>
    </section>

    <!-- ===== Packages Grid ===== -->
    <main class="grid">
        {% for i in package %}
        <div class="card">
            <div class="card-img">
                {% if i.image %}
                <img src="{{ i.image.url }}" alt="">
                {% else %}
                <img src="{% static 'images/placeholder.jpg' %}" alt="">
                {% endif %}
                <span class="price">₹ {{ i.price }}</span>
            </div>

            <div class="card-body">
                <h3>{{ i.title }}</h3>
                <p>{{ i.description }}</p>

                <div class="card-meta">
                    <span>{{ i.date|date:"Y-m-d" }}</span>
                    <span>{{ i.booking_set.count }} bookings</span>
                </div>

                <div class="card-actions">
                    <a href="{% url 'vendorupdate' i.pk %}" class="btn primary">Edit</a>
                    <a href="{% url 'vendordelete' i.pk %}" class="btn danger">Delete</a>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="empty">
            <h3>No packages yet</h3>
            <a href="{% url 'vcreate' %}" class="btn primary">Create Package</a>
        </div>
        {% endfor %}
    </main>

</div>

<!-- ===== Mobile Bottom Navigation ===== -->
<nav class="mobile-nav">
    <a href="{% url 'vcreate' %}">Create</a>
    <a href="{% url 'vendorbookings' %}">Bookings</a>
    <a href="{% url 'vendorlogout' %}">Logout</a>
</nav>

</body>
</html>
